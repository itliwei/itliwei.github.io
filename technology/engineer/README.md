# 微服务架构基本思想

:::tip 成长的本质就是不断破墙而出的认知觉醒！

  你以为你以为的就是你以为的吗？               ----《这不是我的》

:::right


:::

## 隔离

### 微服务的本质是隔离！

#### 业务隔离
    
    业务分离
    
    层次隔离

#### 服务隔离

    动静隔离
   
    读写分离

#### 轻重分离

    核心隔离
    
    快慢隔离
    
    冷热隔离

#### 物理隔离
    
    线程隔离
    
    进程隔离
    
    集群隔离
    
## 提效  
  
### 微服务的目标是提效

#### 开发效率
   
   规范化
     
       开发规范
       
       代码规范
       
       日志规范
       
       架构规范

   工具化
   
      通用jar包
      
        orm、
      
      脚手架
      
        springboot、elementui等
      
      插件(maven、chrome、ide)
   
   平台化
   
      
   

#### 测试效率

   单元测试
    
    mock、
    
   集成测试
   
   自动化测试
   
#### 发布效率

   CI/CD 
   
   金丝雀发布、蓝绿发布
   
   心跳检测

#### 运维效率

   全链路追踪
   
   统一日志平台
   
   在线JVM诊断
   
   统一监控平台


## 稳定  
  
### 微服务的保障是稳定

#### 超时保护

   超时设置：设置过长，会造成线程阻塞，可能会造成OOM，设置过短会造成频繁失败。
    
    nginx
    
    dubbo
    
    httpClient
    
    db
   
   超时传递：一个请求每个阶段开始前就要检查是否还有足够的剩余来处理请求。
   
    http的header里填充req-timeout字段，在设置httpClient的时候动态设置上timeOut。
    

#### 过载保护
  
   令牌桶算法
   
   漏桶算法

#### 限流

#### 降级

#### 熔断

#### 重试

#### 负载均衡
