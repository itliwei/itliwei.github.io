(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{504:function(v,_,i){"use strict";i.r(_);var l=i(11),t=Object(l.a)({},(function(){var v=this,_=v.$createElement,i=v._self._c||_;return i("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[i("h1",{attrs:{id:"架构基本思想"}},[v._v("架构基本思想")]),v._v(" "),i("div",{staticClass:"custom-block tip"},[i("p",{staticClass:"custom-block-title"},[v._v("成长的本质就是不断破墙而出的认知觉醒！")]),v._v(" "),i("p",[v._v("你以为你以为的就是你以为的吗？")]),v._v(" "),i("div",{staticClass:"custom-block right"},[i("p",[v._v("——《这不是我的》")])])]),v._v(" "),i("h2",{attrs:{id:"隔离"}},[v._v("隔离")]),v._v(" "),i("h3",{attrs:{id:"微服务的本质是隔离！"}},[v._v("微服务的本质是隔离！")]),v._v(" "),i("h4",{attrs:{id:"业务隔离"}},[v._v("业务隔离")]),v._v(" "),i("ul",[i("li",[v._v("业务分离")]),v._v(" "),i("li",[v._v("层次隔离")])]),v._v(" "),i("h4",{attrs:{id:"服务隔离"}},[v._v("服务隔离")]),v._v(" "),i("ul",[i("li",[v._v("动静隔离")]),v._v(" "),i("li",[v._v("读写分离")])]),v._v(" "),i("h4",{attrs:{id:"轻重分离"}},[v._v("轻重分离")]),v._v(" "),i("ul",[i("li",[v._v("核心隔离")]),v._v(" "),i("li",[v._v("快慢隔离")]),v._v(" "),i("li",[v._v("冷热隔离")])]),v._v(" "),i("h4",{attrs:{id:"物理隔离"}},[v._v("物理隔离")]),v._v(" "),i("ul",[i("li",[v._v("线程隔离")]),v._v(" "),i("li",[v._v("进程隔离")]),v._v(" "),i("li",[v._v("集群隔离")])]),v._v(" "),i("h2",{attrs:{id:"提效"}},[v._v("提效")]),v._v(" "),i("h3",{attrs:{id:"微服务的目标是提效"}},[v._v("微服务的目标是提效")]),v._v(" "),i("h4",{attrs:{id:"开发效率"}},[v._v("开发效率")]),v._v(" "),i("ul",[i("li",[i("p",[v._v("模块化")])]),v._v(" "),i("li",[i("p",[v._v("短信、push、消息、支付、订单……")])]),v._v(" "),i("li",[i("p",[v._v("规范化")]),v._v(" "),i("ul",[i("li",[v._v("开发规范")]),v._v(" "),i("li",[v._v("代码规范")]),v._v(" "),i("li",[v._v("日志规范")]),v._v(" "),i("li",[v._v("架构规范")])])]),v._v(" "),i("li",[i("p",[v._v("工具化")]),v._v(" "),i("ul",[i("li",[v._v("通用jar包（orm、utils）")]),v._v(" "),i("li",[v._v("脚手架\n"),i("ul",[i("li",[v._v("springboot：https://start.spring.io")]),v._v(" "),i("li",[v._v("elementui：vue-cli")])])]),v._v(" "),i("li",[v._v("插件(maven、chrome、ide)")])])]),v._v(" "),i("li",[i("p",[v._v("平台化")]),v._v(" "),i("ul",[i("li",[v._v("日志平台")]),v._v(" "),i("li",[v._v("链路追踪平台")]),v._v(" "),i("li",[v._v("监控平台")]),v._v(" "),i("li",[v._v("服务治理平台")]),v._v(" "),i("li",[v._v("定时任务平台")]),v._v(" "),i("li",[v._v("实时计算平台")])])])]),v._v(" "),i("h4",{attrs:{id:"测试效率"}},[v._v("测试效率")]),v._v(" "),i("ul",[i("li",[i("p",[v._v("单元测试")]),v._v(" "),i("p",[v._v("junit")]),v._v(" "),i("p",[v._v("mocktio")])]),v._v(" "),i("li",[i("p",[v._v("流量染色")]),v._v(" "),i("p",[v._v("流量染色是指根据流量协议设置对应的流量染色规则，对指定的流量进行染色标记，并在整个调用链中携带该标记。通过染色流量可以对特定的流量进行跟踪和路由")])])]),v._v(" "),i("h4",{attrs:{id:"发布效率"}},[v._v("发布效率")]),v._v(" "),i("ul",[i("li",[v._v("CI/CD\n"),i("ul",[i("li",[v._v("Jenkins")]),v._v(" "),i("li",[v._v("GitLab CI")]),v._v(" "),i("li",[v._v("Travis CI")])])]),v._v(" "),i("li",[v._v("CR\n"),i("ul",[i("li",[v._v("Gerrit")])])]),v._v(" "),i("li",[v._v("部署方式\n"),i("ul",[i("li",[v._v("金丝雀发布(灰度部署)")]),v._v(" "),i("li",[v._v("蓝绿发布")]),v._v(" "),i("li",[v._v("滚动部署")])])])]),v._v(" "),i("h4",{attrs:{id:"运维效率"}},[v._v("运维效率")]),v._v(" "),i("ul",[i("li",[v._v("全链路追踪\n"),i("ul",[i("li",[v._v("Skywalking")]),v._v(" "),i("li",[v._v("ZipKin")]),v._v(" "),i("li",[v._v("Pinpoint")])])]),v._v(" "),i("li",[v._v("统一日志平台\n"),i("ul",[i("li",[v._v("ELK")]),v._v(" "),i("li",[v._v("Graylog")]),v._v(" "),i("li",[v._v("Loki")])])]),v._v(" "),i("li",[v._v("统一监控平台\n"),i("ul",[i("li",[v._v("Promethues")])])]),v._v(" "),i("li",[v._v("在线JVM诊断平台\n"),i("ul",[i("li",[v._v("Arthas(阿里)")]),v._v(" "),i("li",[v._v("Bistoury(去哪儿)")])])]),v._v(" "),i("li",[v._v("服务治理平台\n"),i("ul",[i("li",[v._v("服务注册")]),v._v(" "),i("li",[v._v("服务发现")])])])]),v._v(" "),i("h2",{attrs:{id:"稳定"}},[v._v("稳定")]),v._v(" "),i("h3",{attrs:{id:"微服务的保障是稳定"}},[v._v("微服务的保障是稳定")]),v._v(" "),i("h4",{attrs:{id:"超时保护"}},[v._v("超时保护")]),v._v(" "),i("p",[v._v("没有什么比挂起的请求 和无响应的界面更令人失望。这不仅浪 费资源，而且还会让用户体验变得更差。良好 的超时策略，可以尽可能让服务不堆积请求。")]),v._v(" "),i("p",[v._v("超时设置：设置过长，会造成线程阻塞，可能会造成OOM，设置过短会造成频繁失败。")]),v._v(" "),i("ul",[i("li",[i("p",[v._v("nginx")])]),v._v(" "),i("li",[i("p",[v._v("RPC")])]),v._v(" "),i("li",[i("p",[v._v("httpClient")])]),v._v(" "),i("li",[i("p",[v._v("db")]),v._v(" "),i("p",[v._v("超时传递：一个请求每个阶段开始前就要检查是否还有足够的剩余来处理请求。")])])]),v._v(" "),i("blockquote",[i("p",[v._v("http的header里填充req-timeout字段，在设置httpClient的时候动态设置上timeOut。")])]),v._v(" "),i("h4",{attrs:{id:"过载保护"}},[v._v("过载保护")]),v._v(" "),i("p",[v._v("系统过载是指当前的外部请求量超过了系统的最大处理能力。其最终目标是在系统过载时，服务还能提供一个稳定的较高的处理能力。")]),v._v(" "),i("ul",[i("li",[v._v("过载预防：")]),v._v(" "),i("li",[v._v("压测")]),v._v(" "),i("li",[v._v("过载处置\n"),i("ul",[i("li",[v._v("监控告警")]),v._v(" "),i("li",[v._v("弹性扩容")]),v._v(" "),i("li",[v._v("限流、熔断、降级")])])]),v._v(" "),i("li",[v._v("过载恢复")]),v._v(" "),i("li",[v._v("无状态应用：快速重启")]),v._v(" "),i("li",[v._v("有状态应用：按一定策略将状态持久化，重启之后加载持久化的状态数据，状态恢复。")])]),v._v(" "),i("h4",{attrs:{id:"限流"}},[v._v("限流")]),v._v(" "),i("ul",[i("li",[i("p",[v._v("限流算法：")]),v._v(" "),i("ul",[i("li",[v._v("令牌桶算法")]),v._v(" "),i("li",[v._v("漏斗算法")])])]),v._v(" "),i("li",[i("p",[v._v("限流实现：")]),v._v(" "),i("ul",[i("li",[v._v("单机限流（guava）")]),v._v(" "),i("li",[v._v("分布式限流（ redis+LUA）")]),v._v(" "),i("li",[v._v("平台限流（ sentinel）")])])])]),v._v(" "),i("h4",{attrs:{id:"熔断降级"}},[v._v("熔断降级")]),v._v(" "),i("ul",[i("li",[v._v("断路器模式")]),v._v(" "),i("li",[v._v("舱壁隔离模式")])]),v._v(" "),i("h4",{attrs:{id:"重试策略"}},[v._v("重试策略")]),v._v(" "),i("p",[v._v("故障转移（Failover）")]),v._v(" "),i("p",[v._v("快速失败（Failfast）")]),v._v(" "),i("p",[v._v("安全失败（Failsafe）")]),v._v(" "),i("p",[v._v("沉默失败（Failsilent）")]),v._v(" "),i("p",[v._v("故障恢复（Failback）")]),v._v(" "),i("p",[v._v("并行调用（Forking）")]),v._v(" "),i("p",[v._v("广播调用（Broadcast）")]),v._v(" "),i("h4",{attrs:{id:"负载均衡"}},[v._v("负载均衡")]),v._v(" "),i("p",[v._v("轮循均衡（Round Robin）")]),v._v(" "),i("p",[v._v("权重轮循均衡（Weighted Round Robin）")]),v._v(" "),i("p",[v._v("随机均衡（Random）")]),v._v(" "),i("p",[v._v("权重随机均衡（Weighted Random）")]),v._v(" "),i("p",[v._v("一致性哈希均衡（Consistency Hash）")]),v._v(" "),i("p",[v._v("响应速度均衡（Response Time）")]),v._v(" "),i("p",[v._v("最少连接数均衡（Least Connection）")]),v._v(" "),i("h4",{attrs:{id:"混沌工程"}},[v._v("混沌工程")]),v._v(" "),i("blockquote",[i("p",[v._v("混沌工程是一种帮助我们获得更多的关于系统的新认知的实验方法。")]),v._v(" "),i("p",[v._v("它也可以视为流感疫苗，故意将有害物质注入体内以防止未来疾病，这似乎很疯狂，但这种方法也适用于分布式云系统。混沌工程会将故障注入系统以测试系统对其的响应。这使公司能够为宕机做准备，并在宕机发生之前将其影响降至最低。")])])])}),[],!1,null,null,null);_.default=t.exports}}]);